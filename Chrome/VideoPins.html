<html>
<head>
<style>
    body
    {
        overflow: hidden;
    }
    iframe
    {
        width: 100%;
        height: 100%;
    }
    #video
    {
        width: 100%;
        height: 100%;
        top: 0px;
        left: 0px;
        position: absolute;
    }    
    #embedVideoPins
    {
        top: -10000px;
        left: -10000px;
        position: absolute;
    }
</style>

<!--
<link type="text/css" href="css/cupertino/jquery-ui-1.8.18.custom.css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.18.custom.min.js"></script>
-->
<script type="text/javascript" src="VideoPins.js"></script>
<!-- <script type="text/javascript" src="http://www.youtube.com/player_api"></script> -->
<script>
    /*
    var player;
    function onYouTubePlayerAPIReady()
    {
        player = new YT.Player('player', {
          height: '390',
          width: '640',
          videoId: 'u1zgFlCw8Aw',
          events: {
            'onStateChange': onPlayerStateChange
          }
        });
    }

    function onPlayerStateChange(event)
    {
        if (event.data == YT.PlayerState.PAUSED) alert("paused");
        if (event.data == YT.PlayerState.CUED) alert("cued");
    }
    */
    
    // document.onclick = getMousePosition;
    function getMousePosition(e) 
    {
        posX = e.pageX;
        posY = e.pageY;
        alert(posX + '\n' + posY);
        return true;
    }
</script>
</head>
<body>
    <!--<iframe width="560" height="315" src="http://www.youtube.com/embed/Qla_Q5X2M5I" frameborder="0" allowfullscreen></iframe>-->
    <!--<iframe width="560" height="315" src="http://www.youtube.com/embed/0EdaKlqIwPU" frameborder="0" allowfullscreen></iframe>-->

    <div id="video"></div>

    <embed id="embedVideoPins" type="application/x-videopins">
    <script type="text/javascript">
        var bg_page = chrome.extension.getBackgroundPage();
        var obj = JSON.parse(localStorage['video']);

        document.title = obj.title;
        document.getElementById('video').innerHTML = obj.html;
        
        window.onload = function()
        {	// after page onloaded.
            var m_Pin = new VideoPins(document.getElementById("embedVideoPins"));
            
            // windows XP offset: width=10, height=27. correct=650,418.
            var hWnd = m_Pin.HookWindow(document.title, obj.x, obj.y, obj.width+bg_page.OS_windowOffsetW, obj.height+bg_page.OS_windowOffsetH);

            chrome.windows.getCurrent(
                function(window)
                {
                    var newPin = new Object();
                    newPin.hWnd = hWnd;
                    newPin.title = obj.title;
                    //alert(window.width +'\n' + window.height);
                    
                    bg_page.Pins.add(window.id, newPin);
                });
        }
        
    </script>

</body>
</html>
<!--<div class="-cx-PRIVATE-uiInlineBlock__root shareRedesignVideo shareRedesignMedia -cx-PRIVATE-uiImageBlock__image  lfloat swfObject" id="u5qzo9_155" data-swfid="swf_u5qzo9_155"><iframe width="358" height="220" frameborder="0" src="https://s-static.ak.facebook.com/common/referer_frame.php"></iframe></div>-->